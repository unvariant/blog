<html><head><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/style.css"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="true"/><link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&amp;display=swap" rel="stylesheet"/></head><body><div class="file"><a href="/plugins/headers.js/" class="file-link"><img src="/icons/text.png"/><span>.</span></a><div class="file-meta"><span>1 KiB</span><span class="file-meta-date">1969-12-31 16:00</span></div></div><div class="file"><a href="/plugins/" class="file-link"><img src="/icons/dir.png"/><span>..</span></a><div class="file-meta"><span>1 KiB</span><span class="file-meta-date">1969-12-31 16:00</span></div></div><details open="" class="always-open"><summary class="sticky"><div><b>headers.js</b></div><div><b>JS</b></div></summary><div class="code-block"><div class="code-block-lines"><pre><a id="L1" href="/plugins/headers.js/#L1">   1 <div class="highlight"><pre> </pre></div></a>
<a id="L2" href="/plugins/headers.js/#L2">   2 <div class="highlight"><pre> </pre></div></a>
<a id="L3" href="/plugins/headers.js/#L3">   3 <div class="highlight"><pre> </pre></div></a>
<a id="L4" href="/plugins/headers.js/#L4">   4 <div class="highlight"><pre> </pre></div></a>
<a id="L5" href="/plugins/headers.js/#L5">   5 <div class="highlight"><pre> </pre></div></a>
<a id="L6" href="/plugins/headers.js/#L6">   6 <div class="highlight"><pre> </pre></div></a>
<a id="L7" href="/plugins/headers.js/#L7">   7 <div class="highlight"><pre> </pre></div></a>
<a id="L8" href="/plugins/headers.js/#L8">   8 <div class="highlight"><pre> </pre></div></a>
<a id="L9" href="/plugins/headers.js/#L9">   9 <div class="highlight"><pre> </pre></div></a>
<a id="L10" href="/plugins/headers.js/#L10">  10 <div class="highlight"><pre> </pre></div></a>
<a id="L11" href="/plugins/headers.js/#L11">  11 <div class="highlight"><pre> </pre></div></a>
<a id="L12" href="/plugins/headers.js/#L12">  12 <div class="highlight"><pre> </pre></div></a>
<a id="L13" href="/plugins/headers.js/#L13">  13 <div class="highlight"><pre> </pre></div></a>
<a id="L14" href="/plugins/headers.js/#L14">  14 <div class="highlight"><pre> </pre></div></a>
<a id="L15" href="/plugins/headers.js/#L15">  15 <div class="highlight"><pre> </pre></div></a>
<a id="L16" href="/plugins/headers.js/#L16">  16 <div class="highlight"><pre> </pre></div></a>
<a id="L17" href="/plugins/headers.js/#L17">  17 <div class="highlight"><pre> </pre></div></a>
<a id="L18" href="/plugins/headers.js/#L18">  18 <div class="highlight"><pre> </pre></div></a>
<a id="L19" href="/plugins/headers.js/#L19">  19 <div class="highlight"><pre> </pre></div></a>
<a id="L20" href="/plugins/headers.js/#L20">  20 <div class="highlight"><pre> </pre></div></a>
<a id="L21" href="/plugins/headers.js/#L21">  21 <div class="highlight"><pre> </pre></div></a>
<a id="L22" href="/plugins/headers.js/#L22">  22 <div class="highlight"><pre> </pre></div></a>
<a id="L23" href="/plugins/headers.js/#L23">  23 <div class="highlight"><pre> </pre></div></a>
<a id="L24" href="/plugins/headers.js/#L24">  24 <div class="highlight"><pre> </pre></div></a>
<a id="L25" href="/plugins/headers.js/#L25">  25 <div class="highlight"><pre> </pre></div></a>
<a id="L26" href="/plugins/headers.js/#L26">  26 <div class="highlight"><pre> </pre></div></a>
<a id="L27" href="/plugins/headers.js/#L27">  27 <div class="highlight"><pre> </pre></div></a>
<a id="L28" href="/plugins/headers.js/#L28">  28 <div class="highlight"><pre> </pre></div></a>
<a id="L29" href="/plugins/headers.js/#L29">  29 <div class="highlight"><pre> </pre></div></a>
<a id="L30" href="/plugins/headers.js/#L30">  30 <div class="highlight"><pre> </pre></div></a>
<a id="L31" href="/plugins/headers.js/#L31">  31 <div class="highlight"><pre> </pre></div></a>
<a id="L32" href="/plugins/headers.js/#L32">  32 <div class="highlight"><pre> </pre></div></a>
<a id="L33" href="/plugins/headers.js/#L33">  33 <div class="highlight"><pre> </pre></div></a>
<a id="L34" href="/plugins/headers.js/#L34">  34 <div class="highlight"><pre> </pre></div></a>
<a id="L35" href="/plugins/headers.js/#L35">  35 <div class="highlight"><pre> </pre></div></a>
<a id="L36" href="/plugins/headers.js/#L36">  36 <div class="highlight"><pre> </pre></div></a>
<a id="L37" href="/plugins/headers.js/#L37">  37 <div class="highlight"><pre> </pre></div></a>
<a id="L38" href="/plugins/headers.js/#L38">  38 <div class="highlight"><pre> </pre></div></a>
<a id="L39" href="/plugins/headers.js/#L39">  39 <div class="highlight"><pre> </pre></div></a>
<a id="L40" href="/plugins/headers.js/#L40">  40 <div class="highlight"><pre> </pre></div></a>
<a id="L41" href="/plugins/headers.js/#L41">  41 <div class="highlight"><pre> </pre></div></a>
<a id="L42" href="/plugins/headers.js/#L42">  42 <div class="highlight"><pre> </pre></div></a>
<a id="L43" href="/plugins/headers.js/#L43">  43 <div class="highlight"><pre> </pre></div></a>
<a id="L44" href="/plugins/headers.js/#L44">  44 <div class="highlight"><pre> </pre></div></a>
</pre></div><div class="code-block-code"><pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { visit } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;unist-util-visit&quot;</span>;
<span class="hljs-keyword">import</span> slugify <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;slugify&quot;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">tree</span>) {
        <span class="hljs-title function_">visit</span>(tree, <span class="hljs-string">&quot;heading&quot;</span>, visitor);

        <span class="hljs-keyword">function</span> <span class="hljs-title function_">visitor</span>(<span class="hljs-params">node</span>) {
            <span class="hljs-keyword">const</span> data = node.<span class="hljs-property">data</span> || (node.<span class="hljs-property">data</span> = {})
            <span class="hljs-keyword">const</span> props = data.<span class="hljs-property">hProperties</span> || (data.<span class="hljs-property">hProperties</span> = {});
            <span class="hljs-keyword">const</span> slug = <span class="hljs-title function_">slugify</span>(<span class="hljs-title function_">collect</span>(node)).<span class="hljs-title function_">toLowerCase</span>();

            <span class="hljs-keyword">const</span> children = [
            {
                <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;inlineCode&quot;</span>,
                <span class="hljs-attr">value</span>: <span class="hljs-string">&quot;#&quot;</span>,
                <span class="hljs-attr">data</span>: {
                    <span class="hljs-attr">hProperties</span>: {
                        <span class="hljs-attr">id</span>: <span class="hljs-string">&quot;_hash&quot;</span>
                    }
                }
            },].<span class="hljs-title function_">concat</span>(node.<span class="hljs-property">children</span>);

            data.<span class="hljs-property">id</span> = slug;
            props.<span class="hljs-property">id</span> = slug;
            
            node.<span class="hljs-property">children</span> = [{
                <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;link&quot;</span>,
                <span class="hljs-attr">url</span>: <span class="hljs-string">`#<span class="hljs-subst">${slug}</span>`</span>,
                <span class="hljs-attr">children</span>: children,
            }];
        }

        <span class="hljs-keyword">function</span> <span class="hljs-title function_">collect</span>(<span class="hljs-params">node</span>) {
            <span class="hljs-keyword">if</span> (node.<span class="hljs-title function_">hasOwnProperty</span>(<span class="hljs-string">&quot;children&quot;</span>)) {
                <span class="hljs-keyword">return</span> node.<span class="hljs-property">children</span>.<span class="hljs-title function_">map</span>(collect).<span class="hljs-title function_">join</span>(<span class="hljs-string">&quot;&quot;</span>);
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (node.<span class="hljs-title function_">hasOwnProperty</span>(<span class="hljs-string">&quot;value&quot;</span>)) {
                <span class="hljs-keyword">return</span> node.<span class="hljs-property">value</span>;
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;cannot determine node value&quot;</span>);
            }
        }
    }
}</code></pre></div></div></details></body></html>